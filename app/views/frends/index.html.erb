<% content_for :breadcrumb do %>
  <li><%= link_to "Diagnosis", diagnoses_path %></li>
  <li class="active">FREND</li>
<% end %>

<div class='alert alert-info fade in' data-alert='alert'>
  <h3>
    <strong>
      Measurement history of Diagnosis for <a href="http://nanoentek.com/product.php?id=4">NanoEnTek FREND</a>
    </strong>
  </h3>
  <p>Here you'll see measurement history of diagnosis for NanoEnTek FREND.</p>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Measured</th>
      <th>IP address</th>
      <th>Serial number</th>
      <th>Type</th>
      <th>Processed</th>
      <th>Kit</th>
      <th>Results</th>
      <th>QC material</th>
      <th colspan="1"></th>
    </tr>
  </thead>

  <tbody>
    <% @frends.each do |frend| %>
      <tr>
        <td><%= frend.diagnosis.measured_at.to_date %></td>
        <td><%= frend.diagnosis.ip_address %></td>
        <td><%= frend.serial_number %></td>
        <td><%= Frend::TEST_TYPE[frend.test_type] %></td>
        <% if frend.processed %>
          <td><%= frend.processed %></td>
        <% else %>
          <td><%= frend.error_code %></td>
        <% end %>
        <td><%= AssayKit.find_by(kit: frend.kit).device %> <button type="button" class="btn btn-default btn-lg btn-xs" data-toggle="popover" title="Reagents (<%= frend.lot %>)" data-content="<%= frend.test_names.join(", ") %>">R</button></td>
        <td><%= frend.test_values.join(", ") %></td>
        <td><%= frend.qc_service + " \#" + frend.qc_lot if frend.qc_service %></td>
        <td><%= link_to 'Destroy', frend, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
